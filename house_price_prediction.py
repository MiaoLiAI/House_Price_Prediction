# -*- coding: utf-8 -*-
"""house price prediction.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1ULEuAnqBEyb5ijakZfwYZXX7KVRe_qtM
"""

import pandas as pd
from google.colab import drive


drive.mount('/content/drive')
!Is "/content/drive/My Drive/Colab Notebooks"

"""## **熟悉几种编码方式**
**对比传统函数定义和lambda的不同**
"""

house_data = pd.read_csv('/content/drive/My Drive/Colab Notebooks/IBM Practice/home_data.csv',encoding='gbk')
house_data

zipcode_mean = house_data.groupby('zipcode').agg({'price':'mean','id':'count'}).reset_index()
zipcode_mean.sort_values(by = 'price', ascending =False )

select_house = house_data[(house_data['sqft_living']>=2000) & (house_data['sqft_living']<=4000)].shape[0]
total_house = house_data.shape[0]
select_house/total_house

from sklearn.linear_model import LinearRegression
from sklearn.metrics import mean_squared_error, r2_score
from sklearn.model_selection import train_test_split
my_features = ['bedrooms', 'bathrooms', 'sqft_living', 'sqft_lot', 'floors', 'zipcode']
advanced_features = [
'bedrooms', 'bathrooms', 'sqft_living', 'sqft_lot', 'floors', 'zipcode',
'condition', # condition of house
'grade', # measure of quality of construction
'waterfront', # waterfront property
'view', # type of view
'sqft_above', # square feet above ground
'sqft_basement', # square feet in basement
'yr_built', # the year built
'yr_renovated', # the year renovated
'lat', 'long', # the lat-long of the parcel
'sqft_living15', # average sq.ft. of 15 nearest neighbors
'sqft_lot15', # average lot size of 15 nearest neighbors
]
X = house_data[my_features]
Y = house_data['price']
X_train,X_test, Y_train, Y_test = train_test_split(X,Y, test_size = 0.2, random_state=0)

linear_model = LinearRegression()
linear_model.fit(X_train, Y_train)
Y_pred = linear_model.predict(X_test)
rmse = mean_squared_error(Y_test, Y_pred) ** 0.5

print('linear regression',rmse)